{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{useNavigate,NavLink}from'react-router-dom';import'./CurrentUserPosts.css';import'./SentMessage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SentMessages=function SentMessages(_ref){var posts=_ref.posts,isLoggedIn=_ref.isLoggedIn,currentUser=_ref.currentUser,token=_ref.token,currentUserMessages=_ref.currentUserMessages,setCurrentUserMessages=_ref.setCurrentUserMessages;var fetchUserData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('fetch user token',token);_context.prev=1;_context.next=4;return fetch('https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/me',{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 4:response=_context.sent;_context.next=7;return response.json();case 7:result=_context.sent;setCurrentUserMessages(result.data.messages);_context.next=13;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function fetchUserData(){return _ref2.apply(this,arguments);};}();useEffect(fetchUserData,[]);return/*#__PURE__*/_jsx(_Fragment,{children:currentUserMessages&&currentUserMessages.map(function(message){if(message.fromUser.username===currentUser){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"sentMessage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sentPostTitle\",children:[\"Post Title: \",message.post.title,\" \",/*#__PURE__*/_jsx(NavLink,{to:\"/posts/\".concat(message.post._id),className:\"sendMessageButton\",children:\"New message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sentPostContent\",children:[\"Message: \",message.content]})]})});}})});};export default SentMessages;","map":{"version":3,"sources":["/Users/kriseldabonifacio/course_work/Strangers_things/src/components/SentMessage.js"],"names":["React","useEffect","useNavigate","NavLink","SentMessages","posts","isLoggedIn","currentUser","token","currentUserMessages","setCurrentUserMessages","fetchUserData","console","log","fetch","headers","response","json","result","data","messages","map","message","fromUser","username","post","title","_id","content"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,WAAT,CAAsBC,OAAtB,KAAqC,kBAArC,CACA,MAAO,wBAAP,CACA,MAAO,mBAAP,C,6IACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAA0F,IAAxFC,CAAAA,KAAwF,MAAxFA,KAAwF,CAAjFC,UAAiF,MAAjFA,UAAiF,CAArEC,WAAqE,MAArEA,WAAqE,CAAxDC,KAAwD,MAAxDA,KAAwD,CAAjDC,mBAAiD,MAAjDA,mBAAiD,CAA5BC,sBAA4B,MAA5BA,sBAA4B,CAC3G,GAAMC,CAAAA,aAAa,2FAAG,uJAClBC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgCL,KAAhC,EADkB,sCAGSM,CAAAA,KAAK,CAAE,wEAAF,CAA4E,CACtGC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2BP,KAA3B,CAFK,CAD6F,CAA5E,CAHd,QAGRQ,QAHQ,qCASOA,CAAAA,QAAQ,CAACC,IAAT,EATP,QASRC,MATQ,eAUdR,sBAAsB,CAACQ,MAAM,CAACC,IAAP,CAAYC,QAAb,CAAtB,CAVc,sJAAH,kBAAbT,CAAAA,aAAa,2CAAnB,CAeEV,SAAS,CACLU,aADK,CACU,EADV,CAAT,CAGF,mBAAO,yBAECF,mBAAmB,EAAIA,mBAAmB,CAACY,GAApB,CAAwB,SAACC,OAAD,CAAY,CACvD,GAAGA,OAAO,CAACC,QAAR,CAAiBC,QAAjB,GAA8BjB,WAAjC,CAA8C,CAC9C,mBAAQ,sCACR,aAAK,SAAS,CAAC,aAAf,wBACI,aAAK,SAAS,CAAC,eAAf,0BAA4Ce,OAAO,CAACG,IAAR,CAAaC,KAAzD,kBAAgE,KAAC,OAAD,EAAS,EAAE,kBAAYJ,OAAO,CAACG,IAAR,CAAaE,GAAzB,CAAX,CAA2C,SAAS,CAAC,mBAArD,yBAAhE,GADJ,cAEI,aAAK,SAAS,CAAC,iBAAf,uBAA2CL,OAAO,CAACM,OAAnD,GAFJ,GADQ,EAAR,CAMC,CAEJ,CAVsB,CAFxB,EAAP,CAeC,CAlCL,CAoCA,cAAexB,CAAAA,YAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport { useNavigate, NavLink } from 'react-router-dom';\nimport './CurrentUserPosts.css';\nimport './SentMessage.css'\nconst SentMessages = ({posts, isLoggedIn, currentUser, token, currentUserMessages, setCurrentUserMessages}) => {\n    const fetchUserData = async () => {\n        console.log('fetch user token', token)\n        try {\n            const response = await fetch ('https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/me', {\n              headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${token}`\n              }\n          })\n            const result = await response.json()\n            setCurrentUserMessages(result.data.messages)\n        } catch (error) {\n            \n        }\n    }  \n      useEffect (\n          fetchUserData, []\n      )\n    return <>\n        {   \n            currentUserMessages && currentUserMessages.map((message)=> {\n                if(message.fromUser.username === currentUser) {\n                return  <>\n                <div className='sentMessage'>\n                    <div className='sentPostTitle'>Post Title: {message.post.title} <NavLink to={`/posts/${message.post._id}`} className='sendMessageButton'>New message</NavLink></div>\n                    <div className='sentPostContent'>Message: {message.content}</div>\n                </div>\n                </>\n                }\n\n            })\n        } \n    </>   \n    }\n\nexport default SentMessages;"]},"metadata":{},"sourceType":"module"}