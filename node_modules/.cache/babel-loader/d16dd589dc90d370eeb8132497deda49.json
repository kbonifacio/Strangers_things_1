{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom';import{Routes,Route,Link,NavLink,BrowserRouter as Router,useNavigate,useParams,BrowserRouter,useSearchParams}from'react-router-dom';import'./Posts.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var baseURL='https://strangers-things.herokuapp.com/api';var cohort='/2108-CSE-RM-WEB-PT';var postURL=\"\".concat(baseURL).concat(cohort,\"/posts\");var Posts=function Posts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];var searchTerm=searchParams.get('searchTerm');var postMatches=function postMatches(post,text){text=text.toLowerCase();var title=post.title,description=post.description,price=post.price,location=post.location;for(var _i=0,_arr=[title,description,price,location];_i<_arr.length;_i++){var field=_arr[_i];if(field.toLowerCase().includes(text)){return true;}}};var filteredPosts=searchTerm?posts.filter(function(post){return postMatches(post,searchTerm);}):posts;var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(postURL);case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;setPosts(result.data.posts);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);throw _context.t0;case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();useEffect(fetchPosts,[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"searchBoxContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"searchHeader\",children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",placeholder:\"title, description, price...\",value:searchTerm,onChange:function onChange(event){setSearchParams({searchTerm:event.target.value});}})]}),filteredPosts&&filteredPosts.length?filteredPosts.map(function(post,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"description\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"postTitle\",children:/*#__PURE__*/_jsx(\"b\",{children:post.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sellerDetails\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Seller: \"}),\" \",post.author.username,/*#__PURE__*/_jsx(NavLink,{to:\"/message\",className:\"sendMessageButton\",children:\"Send Message\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Item Description: \"}),/*#__PURE__*/_jsx(\"i\",{children:post.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Price \"}),post.price]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"delivery\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Delivery \"}),\" \",post.willDeliver?'available':'not available']})})]})]},post._id);}):/*#__PURE__*/_jsx(\"h1\",{children:\"No results\"})]});};export default Posts;","map":{"version":3,"sources":["/Users/kriseldabonifacio/course_work/Strangers_things/src/components/Posts.js"],"names":["React","useState","useEffect","ReactDOM","Routes","Route","Link","NavLink","BrowserRouter","Router","useNavigate","useParams","useSearchParams","baseURL","cohort","postURL","Posts","posts","setPosts","searchParams","setSearchParams","searchTerm","get","postMatches","post","text","toLowerCase","title","description","price","location","field","includes","filteredPosts","filter","fetchPosts","fetch","response","json","result","data","event","target","value","length","map","index","author","username","willDeliver","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Routes, Route, Link, NavLink, BrowserRouter as Router, useNavigate, useParams, BrowserRouter, useSearchParams } from 'react-router-dom';\nimport './Posts.css'\n\n\n\nconst baseURL = 'https://strangers-things.herokuapp.com/api'\nconst cohort = '/2108-CSE-RM-WEB-PT'\nconst postURL = `${baseURL}${cohort}/posts`\n\nconst Posts = () => {\n  const [posts, setPosts] = useState([])\n  const [searchParams, setSearchParams] = useSearchParams()\n  const searchTerm = searchParams.get('searchTerm')\n\n  const postMatches = (post, text) => {\n    text = text.toLowerCase()\n    const {title, description, price, location } = post\n    for (const field of [title, description, price, location]) {\n      if(field.toLowerCase().includes(text)){\n        return true;\n      }\n    }\n  }\n\n  const filteredPosts = searchTerm ? posts.filter(post => postMatches(post, searchTerm)) : posts\n\n\n  \n  const fetchPosts = async () => {\n    try {\n      const response = await fetch(postURL)\n      const result = await response.json()\n      setPosts(result.data.posts)\n\n    } catch (error) {\n      throw error\n    }\n  }\n  useEffect (\n      fetchPosts, []\n  )\n  return <>\n    <div className='searchBoxContainer'>\n      <div className='searchHeader'>Search</div><input type='text' name='search' placeholder='title, description, price...' value={searchTerm} onChange={(event) => {\n      setSearchParams({searchTerm:event.target.value})}} />\n    </div>\n    \n    { filteredPosts && filteredPosts.length\n      ? filteredPosts.map((post, index) => {\n        return (\n            <div key={post._id} className='post'>\n                <div className='description'>\n                    <div className='postTitle'><b>{post.title}</b></div>   \n                    <div className='sellerDetails'><b>Seller: </b> {post.author.username}<NavLink to='/message' className='sendMessageButton'>Send Message</NavLink></div> \n                    <div><b>Item Description: </b><i>{post.description}</i></div>\n                </div>\n                <div>\n                    <div>\n                        <div className='price'><b>Price </b>{post.price}</div>\n                    </div>\n                    <div>\n                        <div className='delivery'>\n                            <b>Delivery </b> {post.willDeliver ? 'available' : 'not available'}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n      })\n      : <h1>No results</h1>\n    } \n  </>\n}\nexport default Posts;"]},"metadata":{},"sourceType":"module"}