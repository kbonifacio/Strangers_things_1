{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import'./DeletePost.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var baseURL='https://strangers-things.herokuapp.com/api';var cohort='/2108-CSE-RM-WEB-PT';var postURL=\"\".concat(baseURL).concat(cohort,\"/posts\");var DeletePost=function DeletePost(_ref){var token=_ref.token,currentUser=_ref.currentUser,posts=_ref.posts,setPosts=_ref.setPosts,post_id=_ref.post_id,currentUserPosts=_ref.currentUserPosts,setCurrentUserPosts=_ref.setCurrentUserPosts;var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(postURL);case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;setPosts(result.data.posts);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);throw _context.t0;case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();useEffect(fetchPosts,[]);var fetchUserData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/me',{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;setCurrentUserPosts(result.data.posts);_context2.next=12;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function fetchUserData(){return _ref3.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var response,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();_context3.prev=1;_context3.next=4;return fetch(\"https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/posts/\".concat(post_id),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:result=_context3.sent;fetchPosts();fetchUserData();_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[1,12]]);}));return function handleDelete(_x){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"Delete\"})});};export default DeletePost;","map":{"version":3,"sources":["/Users/kriseldabonifacio/course_work/Strangers_things/src/components/DeletePost.js"],"names":["React","useEffect","baseURL","cohort","postURL","DeletePost","token","currentUser","posts","setPosts","post_id","currentUserPosts","setCurrentUserPosts","fetchPosts","fetch","response","json","result","data","fetchUserData","headers","handleDelete","event","preventDefault","method","console","log"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,kBAAP,C,gGAEA,GAAMC,CAAAA,OAAO,CAAG,4CAAhB,CACA,GAAMC,CAAAA,MAAM,CAAG,qBAAf,CACA,GAAMC,CAAAA,OAAO,WAAMF,OAAN,SAAgBC,MAAhB,UAAb,CAEA,GAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAA2F,IAAzFC,CAAAA,KAAyF,MAAzFA,KAAyF,CAAlFC,WAAkF,MAAlFA,WAAkF,CAArEC,KAAqE,MAArEA,KAAqE,CAA9DC,QAA8D,MAA9DA,QAA8D,CAApDC,OAAoD,MAApDA,OAAoD,CAA3CC,gBAA2C,MAA3CA,gBAA2C,CAAzBC,mBAAyB,MAAzBA,mBAAyB,CAC1G,GAAMC,CAAAA,UAAU,2FAAG,6LAEUC,CAAAA,KAAK,CAACV,OAAD,CAFf,QAEPW,QAFO,qCAGQA,CAAAA,QAAQ,CAACC,IAAT,EAHR,QAGPC,MAHO,eAIbR,QAAQ,CAACQ,MAAM,CAACC,IAAP,CAAYV,KAAb,CAAR,CAJa,wKAAH,kBAAVK,CAAAA,UAAU,2CAAhB,CAWEZ,SAAS,CACLY,UADK,CACO,EADP,CAAT,CAIA,GAAMM,CAAAA,aAAa,2FAAG,oMAEOL,CAAAA,KAAK,CAAE,wEAAF,CAA4E,CACtGM,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2Bd,KAA3B,CAFK,CAD6F,CAA5E,CAFZ,QAEVS,QAFU,uCAQKA,CAAAA,QAAQ,CAACC,IAAT,EARL,QAQVC,MARU,gBAShBL,mBAAmB,CAACK,MAAM,CAACC,IAAP,CAAYV,KAAb,CAAnB,CATgB,4JAAH,kBAAbW,CAAAA,aAAa,2CAAnB,CAeN,GAAME,CAAAA,YAAY,2FAAG,kBAAOC,KAAP,0IACjBA,KAAK,CAACC,cAAN,GADiB,wCAGUT,CAAAA,KAAK,+EAAwEJ,OAAxE,EAAmF,CAC7Gc,MAAM,CAAE,QADqG,CAE7GJ,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,iCAA2Bd,KAA3B,CAFO,CAFoG,CAAnF,CAHf,QAGPS,QAHO,uCAUQA,CAAAA,QAAQ,CAACC,IAAT,EAVR,QAUPC,MAVO,gBAWbJ,UAAU,GACVM,aAAa,GAZA,qFAcbM,OAAO,CAACC,GAAR,eAda,uEAAH,kBAAZL,CAAAA,YAAY,6CAAlB,CAiBA,mBAAO,sCACH,eAAQ,OAAO,CAAEA,YAAjB,oBADG,EAAP,CAGC,CAnDD,CAoDA,cAAehB,CAAAA,UAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport './DeletePost.css'\n\nconst baseURL = 'https://strangers-things.herokuapp.com/api'\nconst cohort = '/2108-CSE-RM-WEB-PT'\nconst postURL = `${baseURL}${cohort}/posts`\n\nconst DeletePost = ({token, currentUser, posts, setPosts, post_id, currentUserPosts, setCurrentUserPosts}) => {\n    const fetchPosts = async () => {\n        try {\n          const response = await fetch(postURL)\n          const result = await response.json()\n          setPosts(result.data.posts)\n          \n    \n        } catch (error) {\n          throw error\n        }\n      }\n      useEffect (\n          fetchPosts, []\n      )\n  \n      const fetchUserData = async () => {\n        try {\n            const response = await fetch ('https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/me', {\n              headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${token}`\n              }\n          })\n            const result = await response.json()\n            setCurrentUserPosts(result.data.posts)\n        } catch (error) {\n            \n        }\n      }\n\nconst handleDelete = async (event) => {\n    event.preventDefault()\n    try {\n        const response = await fetch(`https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/posts/${post_id}`, {\n          method: \"DELETE\",\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          }\n        })\n        const result = await response.json()\n        fetchPosts()\n        fetchUserData()\n      } catch (error) {\n        console.log(error)\n      }\n  } \nreturn <>\n    <button onClick={handleDelete}>Delete</button>\n</>\n}\nexport default DeletePost;\n"]},"metadata":{},"sourceType":"module"}