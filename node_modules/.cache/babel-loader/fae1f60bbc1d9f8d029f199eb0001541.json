{"ast":null,"code":"import _objectSpread from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kriseldabonifacio/course_work/Strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var baseURL='https://strangers-things.herokuapp.com/api';var cohort='/2108-CSE-RM-WEB-PT';var postURL=\"\".concat(baseURL).concat(cohort,\"/posts\");var EditPost=function EditPost(_ref){var token=_ref.token,currentUser=_ref.currentUser,posts=_ref.posts,setPosts=_ref.setPosts,post_id=_ref.post_id,currentUserPosts=_ref.currentUserPosts,setCurrentUserPosts=_ref.setCurrentUserPosts;var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(postURL);case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;setPosts(result.data.posts);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);throw _context.t0;case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();useEffect(fetchPosts,[]);var fetchUserData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/me',{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;setCurrentUserPosts(result.data.posts);_context2.next=12;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function fetchUserData(){return _ref3.apply(this,arguments);};}();var handleEdit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();fetch(\"http://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/posts/\".concat(post_id),{method:\"PATCH\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({post:post})}).then(function(response){return response.json();}).then(function(result){console.log(result);}).catch(console.error);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function handleEdit(_x){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{value:post.title,placeholder:\"Post Title\",onChange:function onChange(event){setPost(_objectSpread(_objectSpread({},post),{},{title:event.target.value}));}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEdit,children:\"Edit\"})]})});};export default EditPost;","map":{"version":3,"sources":["/Users/kriseldabonifacio/course_work/Strangers_things/src/components/EditPost.js"],"names":["React","useEffect","baseURL","cohort","postURL","EditPost","token","currentUser","posts","setPosts","post_id","currentUserPosts","setCurrentUserPosts","fetchPosts","fetch","response","json","result","data","fetchUserData","headers","handleEdit","event","preventDefault","method","body","JSON","stringify","post","then","console","log","catch","error","title","setPost","target","value"],"mappings":"ggBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,C,6IAEA,GAAMC,CAAAA,OAAO,CAAG,4CAAhB,CACA,GAAMC,CAAAA,MAAM,CAAG,qBAAf,CACA,GAAMC,CAAAA,OAAO,WAAMF,OAAN,SAAgBC,MAAhB,UAAb,CAEA,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAA2F,IAAzFC,CAAAA,KAAyF,MAAzFA,KAAyF,CAAlFC,WAAkF,MAAlFA,WAAkF,CAArEC,KAAqE,MAArEA,KAAqE,CAA9DC,QAA8D,MAA9DA,QAA8D,CAApDC,OAAoD,MAApDA,OAAoD,CAA3CC,gBAA2C,MAA3CA,gBAA2C,CAAzBC,mBAAyB,MAAzBA,mBAAyB,CACxG,GAAMC,CAAAA,UAAU,2FAAG,6LAEUC,CAAAA,KAAK,CAACV,OAAD,CAFf,QAEPW,QAFO,qCAGQA,CAAAA,QAAQ,CAACC,IAAT,EAHR,QAGPC,MAHO,eAIbR,QAAQ,CAACQ,MAAM,CAACC,IAAP,CAAYV,KAAb,CAAR,CAJa,wKAAH,kBAAVK,CAAAA,UAAU,2CAAhB,CAWEZ,SAAS,CACLY,UADK,CACO,EADP,CAAT,CAIA,GAAMM,CAAAA,aAAa,2FAAG,oMAEOL,CAAAA,KAAK,CAAE,wEAAF,CAA4E,CACtGM,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2Bd,KAA3B,CAFK,CAD6F,CAA5E,CAFZ,QAEVS,QAFU,uCAQKA,CAAAA,QAAQ,CAACC,IAAT,EARL,QAQVC,MARU,gBAShBL,mBAAmB,CAACK,MAAM,CAACC,IAAP,CAAYV,KAAb,CAAnB,CATgB,4JAAH,kBAAbW,CAAAA,aAAa,2CAAnB,CAeN,GAAME,CAAAA,UAAU,2FAAG,kBAAOC,KAAP,sHACfA,KAAK,CAACC,cAAN,GAEAT,KAAK,8EAAuEJ,OAAvE,EAAkF,CACrFc,MAAM,CAAE,OAD6E,CAErFJ,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,iCAA2Bd,KAA3B,CAFO,CAF4E,CAMrFmB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,IAAI,CAAEA,IADa,CAAf,CAN+E,CAAlF,CAAL,CASGC,IATH,CASQ,SAAAd,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAThB,EAUGa,IAVH,CAUQ,SAAAZ,MAAM,CAAI,CACda,OAAO,CAACC,GAAR,CAAYd,MAAZ,EACD,CAZH,EAaGe,KAbH,CAaSF,OAAO,CAACG,KAbjB,EAHe,wDAAH,kBAAVZ,CAAAA,UAAU,6CAAhB,CAmBE,mBAAO,sCACL,qCACE,cAAO,KAAK,CAAEO,IAAI,CAACM,KAAnB,CAA0B,WAAW,CAAC,YAAtC,CAAmD,QAAQ,CAAE,kBAACZ,KAAD,CAAS,CAC9Da,OAAO,gCAAKP,IAAL,MAAWM,KAAK,CAAEZ,KAAK,CAACc,MAAN,CAAaC,KAA/B,GAAP,CAA8C,CADtD,EADF,cAGE,cAAO,IAAI,CAAC,MAAZ,EAHF,cAKE,eAAQ,OAAO,CAAEhB,UAAjB,kBALF,GADK,EAAP,CASD,CA3DD,CA8DA,cAAehB,CAAAA,QAAf","sourcesContent":["import React, { useEffect } from 'react';\n\nconst baseURL = 'https://strangers-things.herokuapp.com/api'\nconst cohort = '/2108-CSE-RM-WEB-PT'\nconst postURL = `${baseURL}${cohort}/posts`\n\nconst EditPost = ({token, currentUser, posts, setPosts, post_id, currentUserPosts, setCurrentUserPosts}) => {\n    const fetchPosts = async () => {\n        try {\n          const response = await fetch(postURL)\n          const result = await response.json()\n          setPosts(result.data.posts)\n          \n    \n        } catch (error) {\n          throw error\n        }\n      }\n      useEffect (\n          fetchPosts, []\n      )\n  \n      const fetchUserData = async () => {\n        try {\n            const response = await fetch ('https://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/users/me', {\n              headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${token}`\n              }\n          })\n            const result = await response.json()\n            setCurrentUserPosts(result.data.posts)\n        } catch (error) {\n            \n        }\n      }\n\nconst handleEdit = async (event) => {\n    event.preventDefault()\n    \n    fetch(`http://strangers-things.herokuapp.com/api/2108-CSE-RM-WEB-PT/posts/${post_id}`, {\n      method: \"PATCH\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        post: post\n      })\n    }).then(response => response.json())\n      .then(result => {\n        console.log(result);\n      })\n      .catch(console.error);\n\n  }\n  return <>\n    <form>\n      <input value={post.title} placeholder='Post Title' onChange={(event)=>{\n              setPost({...post, title: event.target.value})}}></input>\n      <input type='text'></input>\n\n      <button onClick={handleEdit}>Edit</button>\n    </form>\n  </>\n}\n\n\nexport default EditPost;"]},"metadata":{},"sourceType":"module"}